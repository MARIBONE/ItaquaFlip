<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; color: #DAA520; font-family: 'Georgia', serif; overflow: hidden; }
        .wrapper { display: flex; flex-direction: column; height: 100vh; }
        #player-div { flex-grow: 1; width: 100%; }
        .royal-bar { height: 50px; display: flex; justify-content: center; align-items: center; background: #000; border-top: 1px solid #DAA520; }
        .switch { display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 0.9em; text-transform: uppercase; }
        input { accent-color: #DAA520; cursor: pointer; }
    </style>
</head>
<body>

<div class="wrapper">
    <div id="player-div"></div>
    <div class="royal-bar">
        <label class="switch">
            <input type="checkbox" id="perpetualLoop" checked>
            <span>✨ Loop Real Ativado ✨</span>
        </label>
    </div>
</div>

<script src="https://api.dmcdn.net/all.js"></script>
<script>
    const loopControl = document.getElementById('perpetualLoop');
    
    // Criação do Player por decreto real
    var player = DM.player(document.getElementById('player-div'), {
        video: 'x9wyqiy',
        width: '100%',
        height: '100%',
        params: {
            autoplay: true,
            mute: true,
            'queue-enable': false,
            'queue-autoplay-next': false
        }
    });

    // Vigilante Real: No fim da obra, o retorno é obrigatório
    player.addEventListener('end', function (e) {
        if (loopControl.checked) {
            e.target.play();
        }
    });

    // Redundância Imperial: Se o player parar por erro de rede ou política do browser
    setInterval(() => {
        if (loopControl.checked) {
            player.play();
        }
    }, 5000); // Checa a cada 5 segundos se a obra continua a rodar
</script>

</body>
</html>
